<!DOCTYPE html> 
<html> 
	<head> 
		<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
		<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<meta charset="utf-8">
   	
    	<link rel="stylesheet" href="style.css">
    	
	</head>
	
	

<body>

<div class = "intro left">
	<div class = "centered">
	<img class = "logo" src = "biglogo.svg" alt = "logo">
	</div>
</div>
<div class = "intro right">
	<div class = "centered">
		
		<p> 
			If you are taking the test as part of our study, please choose the option that describes the test you are now taking. If 
			you are not taking the test as part of our study, select Take Well Rested. 
		</p>
		
		<button type = "button" id = "moveOn" onclick= "restTest()"> Take Well Rested Test</button>
		<button type = "button" id = "moveOnTired" onclick = "fatigueTest()"> Take Fatigued Test</button>

</div>
</div>
<div class = "page dis" id = "disclaimer">
	<h1>
	<img src = "disclaimer1.svg" alt = "logo">

	</h1>
	<p id = "disText">
	The following code has been developed by students and researchers of the Freshman Research Initiative DIY Diagnostics Stream at the University of Texas at Austin. 
	This application is strictly for entertainment purposes and should not be considered a product or a medical diagnostic tool. 
	Any user of this application does so at their own risk. 
	Members of FRI, DIY Diagnostics, and the University of Texas at Austin are not liable for anything relating to this application or its code.</br></br>
		<input type="checkbox" id="myCheck" onclick="agreed()">
		 I have read the disclaimer 
		<button type = "button" id = "moveOn1" onclick = "toInstructions()" disabled> Continue</button>
	
	</p>
	

</div> 
<div class = "page dis" id = "instructions">
	<h1>
	<img src = "instructions1.svg" alt = "logo">
	</h1>
	<p id = "insText">
	Press the button to begin. 
	Once the button is pressed, a series of 20 orange circles will appear in random locations on your screen. 
	Click on each circle as soon as you see them appear. 
	The test will automatically end after the 20 rounds. </br></br>

	<button type = "button" id = "beginTest" onclick= "myFunction()">Begin Test</button>
	</p>
</div>
 



<div class="page" id="two">
	<div id = "box" > </div>
</div>
<div class="page" id="three">
	<form name="chalder" id = "chalder">
<div class = "surveyPage">
	<div class = "last">
	
  	 <div class="form-row">
    		<div class="form-group col-md-6">
      			<label for="name">Your Name</label>
      			<input type="text" class="form-control" id="name" name = "name" placeholder="Name" required>
   	 	</div>
   		 <div class="form-group col-md-6">
			 <label for = "test">Your time in seconds</label>
      			<input type="text" class="form-control" id="test" name = "test" value = "" readonly>
    		</div>
  	</div>
	<div class = "form-row">
  			<div class = "form-group col-md-4">
	  			<label for="sleep">How many hours of sleep have you gotten in the past 24 hours?</label>
  				<input type="text" class = "form-control" id="sleep" name="sleep(hours)" required>
  			</div>
  			<div class = "form-group col-md-4">
	 			<label for="sleep2">On average, how many hours of sleep do you get every night?</label>
  				<input type = "text" class = "form-control" id = "sleep2" name = "avgSleep(hours)" required>
  			</div>
			<div class="form-group col-md-2">
				<label for = "refreshed">Do you currently feel refreshed and awake?</label>
 	 				<select id="refreshed" class = "form-control" name="refreshed" required>
		 				<option value = "">Choose...</option>
    						<option value="Yes">Yes</option>
    						<option value="No">No</option>
		 
    					</select>
 
			</div>
	</div>
  	<div class="form-group">
    		<label for="caff">How much caffeine(mg) have you had in the past 8 hours? A regular cup of coffee has about 95 mg.</label>
  		<input type="text" class = "form-control" id="caff" name="caff(mg)" required>
 	 </div>
	<div class = "form-group">
  			<label for="medication">Are you currently taking any medications or drugs which could impact the results of this sleep survey? </label>
  			<select id="medication" class = "form-control" name="med" required>
			<option value = "">Choose...</option>
    			<option value="Yes, improve">yes, it could improve results</option>
    			<option value="Yes, worsen">yes, it could worsen results</option>
    			<option value="N/A, or won't impact results">N/A or it will not impact results</option>
  			</select>
	</div>
	<div class = "form-row">
  		<div class = "form-group col-md-4">
	  			<label for="hoursSince">How many hours has it been since you last slept?</label>
  				<input type="text" class = "form-control" id="hoursSince" name="hoursSince" required>
  			</div>
			<div class="form-group col-md-4">
				<label for = "tiredLevel">Please rank your current feelings of tiredness and fatigue</label>
 	 				<select id="tiredLevel" class = "form-control" name="tiredLevel" required>
		 				<option value = "">Choose...</option>
    						<option value="1">1-Wide Awake</option>
    						<option value="2">2</option>
						<option value="3">3</option>
    						<option value="4">4</option>
						<option value="5">5-Neutral</option>
    						<option value="6">6</option>
						<option value="7">7</option>
    						<option value="8">8</option>
						<option value="9">9</option>
    						<option value="10">10-Extremely Fatigued</option>
    					</select>
 
			</div>
	</div>


    </div>
    
	<div>
      	<button class="sub"  id = "submit" onclick = "submitRes()">
    		<span>Submit</span>
    	</div>
	</form>
	
	
</div>	
</div>

<div class = "page feedback" id = "results">
	<h1>
		Feedback
	</h1>
	<form name = "feedback">
	<textarea class = "review" name = "review" placeholder="Leave a comment..."></textarea>
	<div>
	<button class="sub" type = "submit" id = "submit2" onclick = "submitFeedback()">
    		<span>Submit</span>
	</div>
	</form>
	
  			
 
</div>
<div class = "page" id = "thanks">
	<p>
		Thank You!
	</p>
	</div>
<script type = "text/javascript" src="reaction.js"></script>
 </body>
<script>
	var scriptURL = 'https://script.google.com/macros/s/AKfycbwTyhITsooZVhWcQbtJ5lwWLw6CW1uwuNouV5Pw4SkZQKPdXGHj/exec'
  const form = document.forms['chalder']
  
  document.getElementById("moveOn").onclick = function() {
	  scriptURL = 'https://script.google.com/macros/s/AKfycbwTyhITsooZVhWcQbtJ5lwWLw6CW1uwuNouV5Pw4SkZQKPdXGHj/exec';
	  location.assign("#disclaimer");
  }
document.getElementById("moveOnTired").onclick = function() {
	  scriptURL = 'https://script.google.com/macros/s/AKfycbyeayo8NqtebfrjEeaR_GeGUHBWfKbSGydaO7L9fWzxpcgxIFec/exec';
	  location.assign("#disclaimer");
  }

  document.getElementById("moveOn1").onclick = function() {
	  location.assign("#instructions");
  }
	
  
  
  
  function submitForm() {
	  form.addEventListener('submit', e => {
    		e.preventDefault()
    		fetch(scriptURL, { method: 'POST', body: new FormData(form)})
      		.then(response => console.log('yay', response))
      		.catch(error => console.error('Error!', error.message))
  	})
  }
	function agreed() {
		var checkBox = document.getElementById("myCheck");
		var button = document.getElementById("moveOn1");
		if (checkBox.checked == true) {
			button.disabled = false; 
		} else {
			button.disabled = true;
		}
	}

  var numTests = 20; 	
  var numTimes = 0;
  var times = new Array();
  var avgTime = 0;	
  var box = document.getElementById("box");
	
  
  
  
 function myFunction() {
    numTimes = 0;
    times = new Array();
    avgTime = 0; 
    location.assign("#two");
    makeBox(); 
 }	
  
  
  function setBox() {
     var yCoord = (Math.random() * (window.innerHeight - 75));
     var xCoord = (Math.random() * (window.innerWidth - 75));					
     box.style.top = yCoord + "px";
     box.style.left = xCoord + "px";			
     box.style.display="block";
     createdTime=Date.now();
  } 
		
		
  var clickedTime; 
  var createdTime;
  var reactionTime; 
		
  function makeBox() {
     var time=Math.random();
     time=time*3000;		
     setTimeout(setBox, time); 		
  }
	
  function clickCircle() {
     numTimes++;
     clickedTime=Date.now();			
     reactionTime=(clickedTime-createdTime)/1000;
     times.push(reactionTime);
     avgTime = avgTime + reactionTime;   
     box.style.display="none";			
     
  }
			
  box.onclick=function() {
     if (numTimes == (numTests - 1)) {
	 clickCircle();
	 location.assign("#three");
	 avgTime = avgTime / numTests;
	 document.getElementById("test").value = avgTime;
     } else {
        clickCircle();
	makeBox();
     }
  }
let btn = document.getElementById("submit");
var elements = document.getElementById("chalder");
var total = 0;
btn.onclick = function() {
	var result = elements.checkValidity();
        submitForm();
        location.assign("#results");
}

let btn2 = document.getElementById("submit2");
btn2.onclick = function() {
	location.assign("#thanks");
}

const reviewSheet = 'https://script.google.com/macros/s/AKfycbxNy5orFR8qWIpLOnw0LEtMk6jnJgOM77QBPE5B10idWz7uTDbg/exec';
const review = document.forms['feedback'];
	
review.addEventListener('submit', e => {
    e.preventDefault()
    fetch(reviewSheet, { method: 'POST', body: new FormData(review)})
      .then(response => console.log('yay', response))
      .catch(error => console.error('Error!', error.message))
  })
	
	</script>



</html>
